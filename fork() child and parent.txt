#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>

void sort(int a[], int n) {
    for(int i=0; i<n-1; i++)
        for(int j=i+1; j<n; j++)
            if(a[i] > a[j]) {
                int t = a[i]; a[i] = a[j]; a[j] = t;
            }
}

int main() {
    int n, arr[50];
    printf("Enter count: ");
    scanf("%d", &n);
    printf("Enter %d integers:\n", n);
    for(int i=0; i<n; i++) scanf("%d", &arr[i]);

    pid_t pid = fork();

    if(pid < 0) {
        printf("Fork failed\n");
        return 1;
    }

    if(pid == 0) {  
        // CHILD PROCESS
        sort(arr, n);
        printf("Child PID: %d\nSorted by Child: ", getpid());
        for(int i=0; i<n; i++) printf("%d ", arr[i]);
        printf("\n");

        // Make this child ORPHAN (parent exits early)
        sleep(5);  
        printf("Child became orphan. New parent PID = %d\n", getppid());
    }
    else { 
        // PARENT PROCESS
        sort(arr, n);
        printf("Parent PID: %d\nSorted by Parent: ", getpid());
        for(int i=0; i<n; i++) printf("%d ", arr[i]);
        printf("\n");

        // Create ZOMBIE: child finishes but parent does NOT wait immediately
        printf("Creating Zombie... Child will finish and become zombie for 5 seconds\n");
        sleep(5);

        // Now remove zombie by waiting
        wait(NULL);
        printf("Zombie cleared using wait(). Parent exiting now.\n");
    }

    return 0;
}
